# Introduction lab exercises

Welcome to the Elastic Stack as Foundation lab exercises. During the lab exercises the student will experiential work through various tasks and activities to gain practical experience and develop new skills. In hands-on learning, attendees are given the opportunity to explore, experiment, and discover knowledge for themselves about Elastic Security.

The goal is to get actively engage and ask questions if something is not clear or you are blocked. Important to understand that there are no strong dependencies between labs, so it's okay if you're behind and follow your own pace.

The following key topics are part of these exercises:

- Exploring the Elastic Security UI
- Collecting data
- Setup a Teams Space

## Exercise 1 - Exploring the Elastic Security UI

This first exercise you are going to explore data that is generated by our Elastic Agent. To complete this exercise the following tasks must be completed.

### 1.1 - Ensure you can ping all Elastic services

All Elastic services must be resolvable using DNS or `hosts` file.

On Windows start `notepad.exe` with *run-as administrator* and edit the file `C:\Windows\System32\drivers\etc\hosts`.
Ensure you can open all extensions (*.*).

Add the following line

```
127.0.0.1       fleet-server kibana elasticsearch localhost zeek es01
```

### 1.2 - Prepare self-signed CA certificate

Ensure that you have copied the self-signed CA certificate to `C:\Elastic` directory.

```
mkdir -p C:\Elastic
cd C:\Elastic
docker cp es-cluster-elasticsearch-1:/usr/share/elasticsearch/config/certs/ca/ca.crt ca.crt
```

### 1.3 - Deploy the Elastic Agent locally

- Login Kibana.
- Open Fleet under Management. Fleet Central Management is opened.
- On tab Agent, click Add Agent.
- Select the Windows-Agent-Policy.
- Enroll in Fleet (Recommended).
- Install Elastic Agent on your host, choose Windows.

Now copy those five(5) lines and paste them in your favorite editor. Now ensure that `--certificate-authorities c:\Elastic\ca.crt` is added to the `enroll` command.

Example
```
.\elastic-agent.exe install --url=https://fleet-server:8220 --enrollment-token=<unique enrollment token> --certificate-authorities c:\Elastic\ca.crt
```

on an Administrator run-as PowerShell7 Terminal. After approx. 2 minutes the agent will be connected and the enrollment is confirmed. Click view enrolled agents.

### 1.4 - Now ensure Windows integration is activated for the Windows-Agent-Policy

- Open Fleet under Management. Fleet Central Management is opened. 
- On tab Agent Policies, click the Windows-Agent-Policy.
- Click Add integration.
- Search for Windows.
- Click Add Windows.
- Keep everything default for now and Save and continue.
- Save and deploy changes.

### 1.5 - Open Security Overview Dashboard

- Open Dashboards under Security.
- Now Open the Overview dashboard.
- Examine this dashboard and look if you can find your newly added host.
- Under Security click Explore.
- Examine the three ways to explore hosts, network and user activity.
- Under Users. Where are those Users coming from?

## Exercise 2 - Collecting data


## Next Steps

You are ready to start with the second lab about [Elastic Stack as Fundament](../02-stackfoundation/README.md) for Elastic Security. Be aware that the trainer might have to explain the training material and provide additional instructions for a jump start.

Enjoy the exercises!!!
